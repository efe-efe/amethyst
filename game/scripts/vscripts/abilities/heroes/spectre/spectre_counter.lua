local ____lualib = require("lualib_bundle")
local __TS__Class = ____lualib.__TS__Class
local __TS__ClassExtends = ____lualib.__TS__ClassExtends
local __TS__Decorate = ____lualib.__TS__Decorate
local __TS__ArraySome = ____lualib.__TS__ArraySome
local __TS__SourceMapTraceBack = ____lualib.__TS__SourceMapTraceBack
__TS__SourceMapTraceBack(debug.getinfo(1).short_src, {["9"] = 30,["10"] = 1,["11"] = 1,["12"] = 1,["13"] = 3,["14"] = 3,["15"] = 4,["16"] = 4,["17"] = 5,["18"] = 5,["19"] = 6,["20"] = 6,["21"] = 6,["22"] = 6,["23"] = 6,["24"] = 6,["25"] = 7,["26"] = 7,["27"] = 8,["28"] = 8,["29"] = 9,["30"] = 9,["31"] = 11,["32"] = 11,["33"] = 12,["34"] = 13,["35"] = 14,["36"] = 15,["37"] = 17,["38"] = 18,["39"] = 13,["40"] = 12,["41"] = 11,["42"] = 12,["44"] = 29,["45"] = 29,["46"] = 30,["47"] = 33,["48"] = 34,["49"] = 35,["50"] = 40,["52"] = 33,["53"] = 44,["54"] = 45,["55"] = 46,["56"] = 46,["57"] = 46,["58"] = 46,["59"] = 46,["60"] = 47,["61"] = 48,["62"] = 48,["63"] = 48,["64"] = 48,["65"] = 48,["66"] = 48,["67"] = 48,["68"] = 48,["69"] = 48,["70"] = 44,["71"] = 51,["72"] = 52,["73"] = 53,["74"] = 59,["75"] = 61,["76"] = 62,["77"] = 63,["78"] = 64,["81"] = 51,["82"] = 69,["83"] = 70,["84"] = 69,["85"] = 73,["86"] = 74,["87"] = 75,["89"] = 73,["90"] = 79,["91"] = 80,["92"] = 81,["94"] = 79,["95"] = 85,["96"] = 86,["97"] = 87,["98"] = 88,["100"] = 91,["101"] = 94,["102"] = 94,["103"] = 94,["104"] = 94,["105"] = 97,["106"] = 98,["108"] = 101,["109"] = 103,["110"] = 104,["112"] = 104,["114"] = 106,["115"] = 107,["117"] = 114,["119"] = 117,["120"] = 119,["123"] = 122,["124"] = 85,["125"] = 125,["126"] = 126,["127"] = 131,["128"] = 131,["129"] = 131,["130"] = 131,["131"] = 131,["132"] = 132,["133"] = 125,["134"] = 135,["135"] = 136,["136"] = 137,["137"] = 142,["138"] = 142,["139"] = 142,["140"] = 142,["141"] = 142,["142"] = 143,["143"] = 143,["144"] = 143,["145"] = 143,["146"] = 143,["147"] = 144,["148"] = 135,["149"] = 147,["150"] = 148,["151"] = 147,["152"] = 151,["153"] = 152,["154"] = 151,["155"] = 155,["156"] = 156,["157"] = 155,["158"] = 30,["159"] = 29,["160"] = 30,["162"] = 160,["163"] = 160,["164"] = 161,["165"] = 161,["166"] = 160,["167"] = 161,["169"] = 163,["170"] = 163,["171"] = 164,["172"] = 165,["173"] = 166,["174"] = 165,["175"] = 169,["176"] = 170,["177"] = 169,["178"] = 173,["179"] = 174,["180"] = 173,["181"] = 181,["182"] = 164,["183"] = 183,["184"] = 184,["186"] = 186,["187"] = 181,["188"] = 193,["189"] = 194,["190"] = 195,["191"] = 196,["192"] = 198,["193"] = 199,["194"] = 200,["195"] = 202,["196"] = 202,["197"] = 202,["198"] = 202,["199"] = 202,["200"] = 202,["201"] = 208,["202"] = 209,["203"] = 209,["204"] = 202,["205"] = 210,["206"] = 211,["207"] = 217,["208"] = 217,["209"] = 217,["210"] = 217,["211"] = 202,["212"] = 219,["213"] = 220,["214"] = 202,["215"] = 202,["216"] = 224,["217"] = 193,["218"] = 227,["219"] = 228,["220"] = 229,["221"] = 230,["222"] = 231,["223"] = 232,["224"] = 234,["225"] = 234,["226"] = 234,["227"] = 234,["228"] = 234,["229"] = 234,["230"] = 234,["231"] = 234,["232"] = 234,["233"] = 234,["234"] = 244,["235"] = 245,["236"] = 246,["237"] = 251,["238"] = 234,["239"] = 234,["240"] = 227,["241"] = 264,["242"] = 265,["243"] = 266,["244"] = 271,["245"] = 271,["246"] = 271,["247"] = 271,["248"] = 271,["249"] = 272,["250"] = 272,["251"] = 272,["252"] = 272,["253"] = 272,["254"] = 273,["255"] = 264,["256"] = 276,["257"] = 277,["258"] = 278,["259"] = 283,["260"] = 284,["261"] = 285,["262"] = 286,["263"] = 276,["264"] = 164,["265"] = 163,["266"] = 164,["268"] = 290,["269"] = 290,["270"] = 291,["271"] = 292,["272"] = 293,["273"] = 293,["274"] = 293,["275"] = 293,["276"] = 293,["277"] = 293,["278"] = 294,["279"] = 292,["280"] = 291,["281"] = 290,["282"] = 291,["284"] = 300,["285"] = 300,["286"] = 301,["287"] = 302,["288"] = 303,["289"] = 304,["290"] = 305,["291"] = 310,["292"] = 310,["293"] = 310,["294"] = 310,["295"] = 310,["296"] = 310,["297"] = 310,["298"] = 310,["299"] = 310,["300"] = 311,["301"] = 311,["302"] = 311,["303"] = 311,["304"] = 311,["305"] = 311,["306"] = 311,["307"] = 311,["308"] = 311,["309"] = 320,["310"] = 320,["311"] = 320,["312"] = 320,["313"] = 320,["314"] = 320,["315"] = 320,["316"] = 320,["317"] = 320,["318"] = 329,["319"] = 329,["320"] = 329,["321"] = 329,["322"] = 329,["323"] = 329,["324"] = 329,["325"] = 329,["327"] = 302,["328"] = 333,["329"] = 334,["330"] = 335,["331"] = 337,["332"] = 337,["333"] = 337,["334"] = 337,["335"] = 337,["336"] = 337,["337"] = 337,["338"] = 337,["339"] = 337,["340"] = 347,["341"] = 347,["342"] = 347,["343"] = 347,["344"] = 349,["345"] = 350,["346"] = 350,["347"] = 350,["348"] = 350,["349"] = 350,["350"] = 350,["351"] = 357,["352"] = 357,["353"] = 357,["354"] = 357,["355"] = 357,["356"] = 357,["357"] = 357,["358"] = 357,["359"] = 357,["360"] = 362,["361"] = 366,["362"] = 366,["363"] = 366,["364"] = 366,["365"] = 370,["366"] = 370,["367"] = 370,["368"] = 366,["369"] = 366,["370"] = 375,["371"] = 375,["372"] = 375,["373"] = 375,["374"] = 379,["375"] = 379,["376"] = 379,["377"] = 375,["378"] = 375,["380"] = 386,["381"] = 387,["382"] = 387,["383"] = 387,["384"] = 387,["386"] = 390,["387"] = 392,["388"] = 398,["389"] = 398,["390"] = 398,["391"] = 398,["392"] = 398,["393"] = 398,["394"] = 398,["395"] = 398,["396"] = 398,["397"] = 399,["398"] = 399,["399"] = 399,["400"] = 399,["401"] = 399,["402"] = 399,["403"] = 399,["404"] = 399,["406"] = 333,["407"] = 403,["408"] = 404,["409"] = 403,["410"] = 301,["411"] = 300,["412"] = 301,["414"] = 416,["415"] = 416,["416"] = 417,["417"] = 418,["418"] = 419,["419"] = 420,["421"] = 418,["422"] = 424,["423"] = 425,["424"] = 425,["425"] = 425,["426"] = 425,["427"] = 425,["428"] = 426,["429"] = 427,["430"] = 424,["431"] = 417,["432"] = 416,["433"] = 417});
local ____exports = {}
local ModifierSpectreCounter, ModifierSpectreCounterRecast, SpectreCounterRecast, ModifierSpectreExCounter, ModifierSpectreExCounterDebuff
local ____dota_ts_adapter = require("lib.dota_ts_adapter")
local registerAbility = ____dota_ts_adapter.registerAbility
local registerModifier = ____dota_ts_adapter.registerModifier
local ____modifier_counter = require("modifiers.modifier_counter")
local ModifierCounter = ____modifier_counter.ModifierCounter
local ____modifier_recast = require("modifiers.modifier_recast")
local ModifierRecast = ____modifier_recast.ModifierRecast
local ____projectiles = require("projectiles")
local ProjectileBehavior = ____projectiles.ProjectileBehavior
local ____util = require("util")
local createRadiusMarker = ____util.createRadiusMarker
local direction2D = ____util.direction2D
local fullyFaceTowards = ____util.fullyFaceTowards
local isGem = ____util.isGem
local isObstacle = ____util.isObstacle
local ____custom_ability = require("abilities.framework.custom_ability")
local CustomAbility = ____custom_ability.CustomAbility
local ____custom_modifier = require("abilities.framework.custom_modifier")
local CustomModifier = ____custom_modifier.CustomModifier
local ____spectre_basic_attack = require("abilities.heroes.spectre.spectre_basic_attack")
local ModifierSpectreBasicAttack = ____spectre_basic_attack.ModifierSpectreBasicAttack
local SpectreCounter = __TS__Class()
SpectreCounter.name = "SpectreCounter"
__TS__ClassExtends(SpectreCounter, CustomAbility)
function SpectreCounter.prototype.OnSpellStart(self)
    local duration = self:GetSpecialValueFor("counter_duration")
    ModifierSpectreCounter:apply(self.caster, self.caster, self, {duration = duration})
    EmitSoundOn("Hero_Spectre.HauntCast", self.caster)
    ParticleManager:ReleaseParticleIndex(ParticleManager:CreateParticle("particles/econ/items/ogre_magi/ogre_ti8_immortal_weapon/ogre_ti8_immortal_bloodlust_buff_circle_outer_pulse.vpcf", PATTACH_ABSORIGIN_FOLLOW, self.caster))
end
SpectreCounter = __TS__Decorate(
    {registerAbility(nil, "spectre_counter")},
    SpectreCounter
)
ModifierSpectreCounter = __TS__Class()
ModifierSpectreCounter.name = "ModifierSpectreCounter"
__TS__ClassExtends(ModifierSpectreCounter, ModifierCounter)
function ModifierSpectreCounter.prototype.OnCreated(self)
    if IsServer() then
        self.particleId = ParticleManager:CreateParticle("particles/spectre/spectre_counter.vpcf", PATTACH_ABSORIGIN_FOLLOW, self.parent)
        self:StartIntervalThink(0.03)
    end
end
function ModifierSpectreCounter.prototype.OnIntervalThink(self)
    local mouse = CustomAbilitiesLegacy:GetCursorPosition(self.ability)
    local direction = direction2D(
        nil,
        self.parent:GetAbsOrigin(),
        mouse
    )
    self:PlayEffectsOnCast()
    fullyFaceTowards(
        nil,
        self.parent,
        Vector(
            direction.x,
            direction.y,
            self.parent:GetForwardVector().z
        )
    )
end
function ModifierSpectreCounter.prototype.OnDestroy(self)
    if IsServer() then
        local particleId = ParticleManager:CreateParticle("particles/econ/items/ogre_magi/ogre_ti8_immortal_weapon/ogre_ti8_immortal_bloodlust_buff_circle_outer_pulse.vpcf", PATTACH_ABSORIGIN_FOLLOW, self.parent)
        ParticleManager:ReleaseParticleIndex(particleId)
        EmitSoundOn("Hero_Spectre.HauntCast", self.parent)
        if self.particleId then
            ParticleManager:DestroyParticle(self.particleId, false)
            ParticleManager:ReleaseParticleIndex(self.particleId)
        end
    end
end
function ModifierSpectreCounter.prototype.DeclareFunctions(self)
    return {MODIFIER_EVENT_ON_ABILITY_EXECUTED}
end
function ModifierSpectreCounter.prototype.OnAbilityExecuted(self, event)
    if IsServer() and event.unit == self.parent and event.ability ~= SpectreCounterRecast:findOne(self.parent) then
        self:Destroy()
    end
end
function ModifierSpectreCounter.prototype.OnOrder(self, event)
    if event.unit == self.parent and (event.order_type == DOTA_UNIT_ORDER_STOP or event.order_type == DOTA_UNIT_ORDER_HOLD_POSITION) then
        self:Destroy()
    end
end
function ModifierSpectreCounter.prototype.OnHit(self, event)
    if IsServer() then
        if not event.triggerCounters then
            return true
        end
        local direction = event.attackCategory == "projectile" and event.projectile:getVelocity():Normalized() or direction2D(
            nil,
            event.source:GetAbsOrigin(),
            self.parent:GetAbsOrigin()
        )
        if event.attackCategory == "projectile" and event.projectile:getIsDestructible() then
            event.projectile:scheduleDestroy()
        end
        local projection = direction.x * self.parent:GetForwardVector().x + direction.y * self.parent:GetForwardVector().y
        if projection <= -0.8 then
            local ____opt_0 = ModifierSpectreBasicAttack:findOne(self.parent)
            if ____opt_0 ~= nil then
                ____opt_0:Replenish()
            end
            if not ModifierSpectreCounterRecast:findOne(self.parent) then
                ModifierSpectreCounterRecast:apply(self.parent, self.parent, self.ability, {abilityLeft = SpectreCounter.name, abilityRight = SpectreCounterRecast.name, duration = 5})
            end
            if self.ability:GetLevel() >= 2 then
            end
            self:PlayEffectsOnTrigger()
            return false
        end
    end
    return true
end
function ModifierSpectreCounter.prototype.PlayEffectsOnCast(self)
    local particleId = ParticleManager:CreateParticle("particles/spectre/spectre_counter_shield.vpcf", PATTACH_ABSORIGIN_FOLLOW, self.parent)
    ParticleManager:SetParticleControlForward(
        particleId,
        0,
        self.parent:GetForwardVector()
    )
    ParticleManager:ReleaseParticleIndex(particleId)
end
function ModifierSpectreCounter.prototype.PlayEffectsOnTrigger(self)
    EmitSoundOn("Hero_Spectre.Reality", self.parent)
    local particleId = ParticleManager:CreateParticle("particles/units/heroes/hero_spectre/spectre_death.vpcf", PATTACH_WORLDORIGIN, nil)
    ParticleManager:SetParticleControl(
        particleId,
        0,
        self.parent:GetAbsOrigin()
    )
    ParticleManager:SetParticleControl(
        particleId,
        3,
        self.parent:GetAbsOrigin()
    )
    ParticleManager:ReleaseParticleIndex(particleId)
end
function ModifierSpectreCounter.prototype.GetStatusEffectName(self)
    return "particles/status_fx/status_effect_terrorblade_reflection.vpcf"
end
function ModifierSpectreCounter.prototype.Visuals(self)
    return {}
end
function ModifierSpectreCounter.prototype.GetMovementSpeedPercentage(self)
    return 80
end
ModifierSpectreCounter = __TS__Decorate(
    {registerModifier(nil, {customNameForI18n = "modifier_spectre_counter_countering"})},
    ModifierSpectreCounter
)
ModifierSpectreCounterRecast = __TS__Class()
ModifierSpectreCounterRecast.name = "ModifierSpectreCounterRecast"
__TS__ClassExtends(ModifierSpectreCounterRecast, ModifierRecast)
ModifierSpectreCounterRecast = __TS__Decorate(
    {registerModifier(nil, {customNameForI18n = "modifier_spectre_counter_recast"})},
    ModifierSpectreCounterRecast
)
SpectreCounterRecast = __TS__Class()
SpectreCounterRecast.name = "SpectreCounterRecast"
__TS__ClassExtends(SpectreCounterRecast, CustomAbility)
function SpectreCounterRecast.prototype.GetAnimation(self)
    return ACT_DOTA_CAST_ABILITY_1
end
function SpectreCounterRecast.prototype.GetPlaybackRateOverride(self)
    return 1
end
function SpectreCounterRecast.prototype.GetCastingCrawl(self)
    return 0
end
function SpectreCounterRecast.prototype.OnAbilityPhaseStart(self)
    if CustomAbility.prototype.OnAbilityPhaseStart(self) then
        self:PlayEffectsOnPhase()
        return true
    end
    return false
end
function SpectreCounterRecast.prototype.OnSpellStart(self)
    local origin = self.caster:GetAbsOrigin()
    local point = CustomAbilitiesLegacy:GetCursorPosition(self)
    local spectreCounter = SpectreCounter:findOne(self.caster)
    local projectileSpeed = self:GetSpecialValueFor("projectile_speed")
    local projectileDirection = direction2D(nil, origin, point)
    local damage = spectreCounter and spectreCounter:GetSpecialValueFor("ability_damage") or 0
    self:ProjectileAttack({
        source = self.caster,
        effectName = "particles/spectre/spectre_ex_second_attack.vpcf",
        spawnOrigin = origin:__add(Vector(0, 0, 80)),
        velocity = projectileDirection:__mul(projectileSpeed),
        groundOffset = 0,
        unitTest = function(____, unit, projectile) return unit:GetUnitName() ~= "npc_dummy_unit" and not CustomEntitiesLegacy:Allies(
            projectile:getSource(),
            unit
        ) end,
        onUnitHit = function(____, unit, projectile)
            ApplyDamage({victim = unit, attacker = self.caster, damage = damage, damage_type = DAMAGE_TYPE_MAGICAL})
            self:TeleportTarget(
                unit,
                projectile:getSource()
            )
        end,
        onFinish = function(____, projectile)
            self:PlayEffectsOnFinish(projectile:getPosition())
        end
    })
    EmitSoundOn("Hero_Nevermore.Raze_Flames", self.caster)
end
function SpectreCounterRecast.prototype.TeleportTarget(self, target, caster)
    local casterOrigin = caster:GetAbsOrigin()
    local targetOrigin = target:GetAbsOrigin()
    local direction = direction2D(nil, targetOrigin, casterOrigin)
    local distance = casterOrigin:__sub(targetOrigin):Length2D()
    local newOrigin = casterOrigin:__add(caster:GetForwardVector():__mul(150))
    self:ProjectileAttack({
        distance = distance,
        startRadius = self:GetSpecialValueFor("hitbox_return"),
        source = self.caster,
        effectName = "particles/spectre/spectre_ex_second_attack.vpcf",
        spawnOrigin = targetOrigin:__add(Vector(0, 0, 80)),
        velocity = direction:__mul(self:GetSpecialValueFor("projectile_speed_return")),
        groundOffset = 0,
        unitBehavior = ProjectileBehavior.NOTHING,
        wallBehavior = ProjectileBehavior.NOTHING,
        onFinish = function()
            FindClearSpaceForUnit(target, newOrigin, true)
            EFX("particles/units/heroes/hero_spectre/spectre_death.vpcf", PATTACH_WORLDORIGIN, target, {cp0 = targetOrigin, cp3 = targetOrigin, release = true})
            EFX("particles/econ/items/outworld_devourer/od_shards_exile_gold/od_shards_exile_prison_end_gold.vpcf", PATTACH_WORLDORIGIN, target, {cp0 = newOrigin, release = true})
        end
    })
end
function SpectreCounterRecast.prototype.PlayEffectsOnPhase(self)
    EmitSoundOn("Hero_Spectre.Haunt", self.caster)
    local particleId = ParticleManager:CreateParticle("particles/econ/items/terrorblade/terrorblade_back_ti8/terrorblade_sunder_ti8_swirl_rope.vpcf", PATTACH_ABSORIGIN_FOLLOW, self.caster)
    ParticleManager:SetParticleControl(
        particleId,
        15,
        Vector(128, 32, 108)
    )
    ParticleManager:SetParticleControl(
        particleId,
        16,
        Vector(1, 0, 0)
    )
    ParticleManager:ReleaseParticleIndex(particleId)
end
function SpectreCounterRecast.prototype.PlayEffectsOnFinish(self, position)
    EmitSoundOnLocationWithCaster(position, "Hero_Nevermore.RequiemOfSouls.Damage", self.caster)
    local particleId = ParticleManager:CreateParticle("particles/units/heroes/hero_arc_warden/arc_warden_wraith_cast.vpcf", PATTACH_ABSORIGIN, self.caster)
    ParticleManager:SetParticleControl(particleId, 0, position)
    ParticleManager:SetParticleControl(particleId, 1, position)
    ParticleManager:SetParticleControl(particleId, 2, position)
    ParticleManager:ReleaseParticleIndex(particleId)
end
SpectreCounterRecast = __TS__Decorate(
    {registerAbility(nil, "spectre_counter_recast")},
    SpectreCounterRecast
)
local SpectreExCounter = __TS__Class()
SpectreExCounter.name = "SpectreExCounter"
__TS__ClassExtends(SpectreExCounter, CustomAbility)
function SpectreExCounter.prototype.OnSpellStart(self)
    ModifierSpectreExCounter:apply(
        self.caster,
        self.caster,
        self,
        {duration = self:GetSpecialValueFor("delay_time")}
    )
    EmitSoundOn("Hero_Spectre.HauntCast", self.caster)
end
SpectreExCounter = __TS__Decorate(
    {registerAbility(nil, "spectre_ex_counter")},
    SpectreExCounter
)
ModifierSpectreExCounter = __TS__Class()
ModifierSpectreExCounter.name = "ModifierSpectreExCounter"
__TS__ClassExtends(ModifierSpectreExCounter, CustomModifier)
function ModifierSpectreExCounter.prototype.OnCreated(self)
    if IsServer() then
        local origin = self.parent:GetAbsOrigin()
        local particleId = ParticleManager:CreateParticle("particles/spectre/spectre_ex_counter.vpcf", PATTACH_OVERHEAD_FOLLOW, self.parent)
        ParticleManager:SetParticleControl(
            particleId,
            2,
            Vector(
                self:Value("radius"),
                self:Value("radius"),
                self:Value("radius")
            )
        )
        ParticleManager:SetParticleControlEnt(
            particleId,
            3,
            self.parent,
            PATTACH_ABSORIGIN_FOLLOW,
            "attach_hitloc",
            origin,
            true
        )
        ParticleManager:SetParticleControlEnt(
            particleId,
            6,
            self.parent,
            PATTACH_POINT_FOLLOW,
            "attach_attack2",
            origin,
            true
        )
        self:AddParticle(
            particleId,
            false,
            false,
            -1,
            false,
            false
        )
    end
end
function ModifierSpectreExCounter.prototype.OnDestroy(self)
    if IsServer() then
        local origin = self.parent:GetAbsOrigin()
        local enemies = CustomEntitiesLegacy:FindUnitsInRadius(
            self.caster,
            origin,
            self:Value("radius"),
            DOTA_UNIT_TARGET_TEAM_ENEMY,
            DOTA_UNIT_TARGET_HERO + DOTA_UNIT_TARGET_BASIC,
            DOTA_UNIT_TARGET_FLAG_NONE,
            FIND_ANY_ORDER
        )
        local giveHealth = __TS__ArraySome(
            enemies,
            function(____, enemy) return not isObstacle(nil, enemy) and not isGem(nil, enemy) end
        )
        for ____, enemy in ipairs(enemies) do
            ApplyDamage({
                victim = enemy,
                attacker = self.parent,
                damage = self:Value("ability_damage"),
                damage_type = DAMAGE_TYPE_PURE
            })
            enemy:AddNewModifier(
                self.caster,
                self.ability,
                "modifier_generic_fading_slow",
                {
                    duration = self:Value("fading_slow_duration"),
                    max_slow_pct = self:Value("fading_slow_pct")
                }
            )
            ModifierSpectreExCounterDebuff:apply(enemy, self.caster, self.ability, {duration = 0.25})
            EFX(
                "particles/econ/items/outworld_devourer/od_shards_exile_gold/od_shards_exile_prison_end_gold.vpcf",
                PATTACH_WORLDORIGIN,
                enemy,
                {
                    cp0 = enemy:GetAbsOrigin(),
                    release = true
                }
            )
            EFX(
                "particles/econ/items/outworld_devourer/od_shards_exile_gold/od_shards_exile_prison_end_gold.vpcf",
                PATTACH_WORLDORIGIN,
                enemy,
                {
                    cp0 = enemy:GetAbsOrigin(),
                    release = true
                }
            )
        end
        if giveHealth then
            self.parent:Heal(
                self:Value("heal"),
                self.ability
            )
        end
        EmitSoundOn("Hero_ShadowDemon.DemonicPurge.Damage", self.parent)
        local particleId = ParticleManager:CreateParticle("particles/units/heroes/hero_grimstroke/grimstroke_ink_swell_aoe.vpcf", PATTACH_ABSORIGIN_FOLLOW, self.parent)
        ParticleManager:SetParticleControl(
            particleId,
            2,
            Vector(
                self:Value("radius"),
                self:Value("radius"),
                self:Value("radius")
            )
        )
        createRadiusMarker(
            nil,
            self.parent,
            origin,
            self:Value("radius"),
            "public",
            0.1
        )
    end
end
function ModifierSpectreExCounter.prototype.GetStatusEffectName(self)
    return "particles/status_fx/status_effect_grimstroke_ink_swell.vpcf"
end
ModifierSpectreExCounter = __TS__Decorate(
    {registerModifier(nil, {customNameForI18n = "modifier_spectre_ex_counter"})},
    ModifierSpectreExCounter
)
ModifierSpectreExCounterDebuff = __TS__Class()
ModifierSpectreExCounterDebuff.name = "ModifierSpectreExCounterDebuff"
__TS__ClassExtends(ModifierSpectreExCounterDebuff, CustomModifier)
function ModifierSpectreExCounterDebuff.prototype.OnCreated(self)
    if IsServer() then
        self:StartIntervalThink(0.03)
    end
end
function ModifierSpectreExCounterDebuff.prototype.OnIntervalThink(self)
    local direction = direction2D(
        nil,
        self.parent:GetAbsOrigin(),
        self.caster:GetAbsOrigin()
    )
    local point = self.parent:GetAbsOrigin():__add(direction:__mul(40))
    self.parent:SetAbsOrigin(point)
end
ModifierSpectreExCounterDebuff = __TS__Decorate(
    {registerModifier(nil, {customNameForI18n = "modifier_spectre_ex_counter_debuff"})},
    ModifierSpectreExCounterDebuff
)
return ____exports

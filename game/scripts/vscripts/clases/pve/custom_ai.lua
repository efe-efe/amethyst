local ____lualib = require("lualib_bundle")
local __TS__ObjectAssign = ____lualib.__TS__ObjectAssign
local __TS__ArrayForEach = ____lualib.__TS__ArrayForEach
local __TS__SourceMapTraceBack = ____lualib.__TS__SourceMapTraceBack
__TS__SourceMapTraceBack(debug.getinfo(1).short_src, {["7"] = 2,["8"] = 2,["9"] = 2,["10"] = 2,["11"] = 2,["12"] = 2,["13"] = 2,["14"] = 8,["15"] = 8,["16"] = 8,["17"] = 8,["18"] = 8,["19"] = 8,["20"] = 8,["21"] = 14,["22"] = 15,["23"] = 15,["24"] = 16,["25"] = 16,["26"] = 17,["27"] = 17,["28"] = 18,["29"] = 18,["30"] = 21,["31"] = 22,["32"] = 22,["33"] = 23,["34"] = 23,["35"] = 24,["36"] = 24,["37"] = 25,["38"] = 25,["39"] = 26,["40"] = 26,["41"] = 27,["42"] = 27,["43"] = 28,["44"] = 28,["45"] = 29,["46"] = 29,["47"] = 30,["48"] = 30,["49"] = 69,["50"] = 77,["51"] = 281,["52"] = 282,["53"] = 283,["54"] = 284,["57"] = 70,["58"] = 71,["59"] = 72,["60"] = 73,["61"] = 74,["62"] = 75,["63"] = 76,["64"] = 77,["65"] = 78,["66"] = 79,["67"] = 79,["68"] = 79,["69"] = 79,["70"] = 79,["71"] = 79,["72"] = 79,["73"] = 79,["74"] = 80,["75"] = 81,["76"] = 82,["77"] = 83,["78"] = 84,["79"] = 86,["80"] = 87,["81"] = 87,["82"] = 87,["83"] = 87,["84"] = 87,["85"] = 87,["86"] = 90,["88"] = 93,["89"] = 93,["90"] = 93,["91"] = 93,["92"] = 93,["93"] = 95,["94"] = 96,["95"] = 96,["96"] = 96,["97"] = 96,["98"] = 96,["99"] = 96,["100"] = 96,["101"] = 96,["102"] = 96,["103"] = 96,["104"] = 96,["105"] = 108,["106"] = 109,["108"] = 111,["110"] = 95,["111"] = 115,["112"] = 116,["113"] = 118,["114"] = 119,["117"] = 122,["120"] = 125,["122"] = 115,["123"] = 129,["124"] = 130,["125"] = 131,["126"] = 133,["127"] = 134,["128"] = 135,["129"] = 137,["130"] = 138,["132"] = 141,["133"] = 142,["135"] = 144,["136"] = 129,["137"] = 147,["138"] = 148,["139"] = 147,["140"] = 151,["141"] = 153,["142"] = 154,["143"] = 155,["144"] = 156,["145"] = 157,["146"] = 157,["147"] = 157,["148"] = 157,["149"] = 157,["150"] = 157,["151"] = 156,["152"] = 164,["153"] = 164,["154"] = 166,["155"] = 167,["156"] = 167,["157"] = 167,["159"] = 167,["161"] = 168,["162"] = 168,["163"] = 168,["165"] = 168,["167"] = 165,["169"] = 170,["171"] = 152,["172"] = 152,["173"] = 152,["174"] = 152,["175"] = 152,["176"] = 152,["177"] = 152,["178"] = 175,["179"] = 151,["180"] = 178,["181"] = 179,["182"] = 178,["183"] = 182,["184"] = 183,["185"] = 185,["186"] = 186,["188"] = 189,["189"] = 190,["190"] = 191,["191"] = 182,["192"] = 194,["193"] = 196,["194"] = 201,["196"] = 204,["197"] = 205,["198"] = 206,["199"] = 206,["200"] = 206,["201"] = 207,["202"] = 211,["203"] = 212,["204"] = 213,["207"] = 216,["208"] = 217,["209"] = 218,["212"] = 221,["213"] = 222,["214"] = 222,["215"] = 222,["216"] = 222,["217"] = 222,["218"] = 222,["219"] = 222,["220"] = 223,["221"] = 224,["224"] = 227,["225"] = 228,["226"] = 228,["227"] = 228,["228"] = 228,["229"] = 229,["230"] = 230,["233"] = 234,["234"] = 235,["236"] = 237,["237"] = 238,["239"] = 206,["240"] = 206,["241"] = 242,["242"] = 243,["243"] = 244,["244"] = 245,["245"] = 246,["247"] = 248,["249"] = 194,["250"] = 252,["251"] = 253,["252"] = 252,["253"] = 256,["254"] = 257,["255"] = 258,["256"] = 260,["257"] = 261,["259"] = 263,["260"] = 264,["261"] = 265,["263"] = 256,["264"] = 269,["265"] = 270,["266"] = 271,["267"] = 272,["268"] = 272,["269"] = 272,["270"] = 272,["271"] = 272,["272"] = 273,["273"] = 273,["274"] = 273,["275"] = 273,["276"] = 273,["277"] = 274,["278"] = 269,["279"] = 277,["280"] = 278,["281"] = 277,["282"] = 288,["283"] = 289,["284"] = 290,["286"] = 292,["287"] = 293,["289"] = 295,["290"] = 296,["293"] = 299,["294"] = 300,["295"] = 301,["296"] = 302,["297"] = 303,["298"] = 304,["301"] = 307,["302"] = 308,["305"] = 311,["306"] = 312,["310"] = 316,["311"] = 317,["312"] = 318,["314"] = 288,["315"] = 322,["316"] = 322,["317"] = 322,["318"] = 322,["319"] = 322,["320"] = 322,["321"] = 322,["322"] = 69,["323"] = 331,["324"] = 337,["325"] = 338,["326"] = 339,["327"] = 343,["328"] = 343,["329"] = 343,["330"] = 343,["331"] = 347,["332"] = 347,["333"] = 347,["334"] = 347,["335"] = 351,["336"] = 351,["337"] = 351,["338"] = 351,["339"] = 351,["340"] = 358,["341"] = 358,["342"] = 358,["343"] = 358,["344"] = 362,["345"] = 362,["346"] = 362,["347"] = 362,["348"] = 362,["349"] = 369,["350"] = 369,["351"] = 369,["352"] = 369,["353"] = 369,["354"] = 376,["355"] = 337,["356"] = 337,["357"] = 336,["358"] = 380,["359"] = 381,["360"] = 382,["361"] = 384,["362"] = 384,["363"] = 384,["364"] = 384,["365"] = 384,["366"] = 391,["367"] = 391,["368"] = 391,["369"] = 391,["370"] = 391,["371"] = 398,["372"] = 398,["373"] = 398,["374"] = 398,["375"] = 398,["376"] = 405,["377"] = 405,["378"] = 405,["379"] = 405,["380"] = 405,["381"] = 412,["382"] = 412,["383"] = 412,["384"] = 412,["385"] = 416,["386"] = 380,["387"] = 380,["388"] = 336,["389"] = 420,["390"] = 421,["391"] = 422,["392"] = 427,["393"] = 427,["394"] = 427,["395"] = 427,["396"] = 431,["397"] = 431,["398"] = 431,["399"] = 431,["400"] = 431,["401"] = 438,["402"] = 420,["403"] = 420,["404"] = 336,["405"] = 442,["406"] = 443,["407"] = 444,["408"] = 449,["409"] = 449,["410"] = 449,["411"] = 449,["412"] = 449,["413"] = 456,["414"] = 442,["415"] = 442,["416"] = 336,["417"] = 460,["418"] = 461,["419"] = 462,["420"] = 467,["421"] = 467,["422"] = 467,["423"] = 467,["424"] = 471,["425"] = 471,["426"] = 471,["427"] = 471,["428"] = 471,["429"] = 478,["430"] = 460,["431"] = 460,["432"] = 336,["433"] = 482,["434"] = 483,["435"] = 484,["436"] = 491,["437"] = 491,["438"] = 491,["439"] = 491,["440"] = 491,["441"] = 499,["442"] = 500,["443"] = 482,["444"] = 482,["445"] = 336,["446"] = 504,["447"] = 505,["448"] = 506,["449"] = 513,["450"] = 513,["451"] = 513,["452"] = 513,["453"] = 513,["454"] = 521,["455"] = 522,["456"] = 504,["457"] = 504,["458"] = 336,["459"] = 526,["460"] = 527,["461"] = 528,["462"] = 535,["463"] = 535,["464"] = 535,["465"] = 535,["466"] = 535,["467"] = 543,["468"] = 526,["469"] = 526,["470"] = 336,["471"] = 547,["472"] = 548,["473"] = 549,["474"] = 553,["475"] = 553,["476"] = 553,["477"] = 553,["478"] = 553,["479"] = 560,["480"] = 561,["481"] = 547,["482"] = 547,["483"] = 336,["484"] = 336});
local ____exports = {}
local CustomAIState = CustomAIState or ({})
CustomAIState.IDLE = 0
CustomAIState[CustomAIState.IDLE] = "IDLE"
CustomAIState.WANDERING = 1
CustomAIState[CustomAIState.WANDERING] = "WANDERING"
CustomAIState.RESTING = 2
CustomAIState[CustomAIState.RESTING] = "RESTING"
local CustomAIBehavior = CustomAIBehavior or ({})
CustomAIBehavior.FOLLOWER = 0
CustomAIBehavior[CustomAIBehavior.FOLLOWER] = "FOLLOWER"
CustomAIBehavior.WANDERER = 1
CustomAIBehavior[CustomAIBehavior.WANDERER] = "WANDERER"
CustomAIBehavior.STATIC = 2
CustomAIBehavior[CustomAIBehavior.STATIC] = "STATIC"
____exports.CustomAITier = CustomAITier or ({})
____exports.CustomAITier.BASIC = 1
____exports.CustomAITier[____exports.CustomAITier.BASIC] = "BASIC"
____exports.CustomAITier.MID = 2
____exports.CustomAITier[____exports.CustomAITier.MID] = "MID"
____exports.CustomAITier.HIGH = 3
____exports.CustomAITier[____exports.CustomAITier.HIGH] = "HIGH"
____exports.CustomAITier.BOSS = 4
____exports.CustomAITier[____exports.CustomAITier.BOSS] = "BOSS"
____exports.NPCNames = NPCNames or ({})
____exports.NPCNames.DIRE_ZOMBIE_RANGE = 0
____exports.NPCNames[____exports.NPCNames.DIRE_ZOMBIE_RANGE] = "DIRE_ZOMBIE_RANGE"
____exports.NPCNames.DIRE_ZOMBIE_RANGE_MEGA = 1
____exports.NPCNames[____exports.NPCNames.DIRE_ZOMBIE_RANGE_MEGA] = "DIRE_ZOMBIE_RANGE_MEGA"
____exports.NPCNames.DIRE_ZOMBIE_MEELE_MEGA = 2
____exports.NPCNames[____exports.NPCNames.DIRE_ZOMBIE_MEELE_MEGA] = "DIRE_ZOMBIE_MEELE_MEGA"
____exports.NPCNames.RADIANT_ZOMBIE_RANGE_MEGA = 3
____exports.NPCNames[____exports.NPCNames.RADIANT_ZOMBIE_RANGE_MEGA] = "RADIANT_ZOMBIE_RANGE_MEGA"
____exports.NPCNames.RADIANT_ZOMBIE_MEELE_MEGA = 4
____exports.NPCNames[____exports.NPCNames.RADIANT_ZOMBIE_MEELE_MEGA] = "RADIANT_ZOMBIE_MEELE_MEGA"
____exports.NPCNames.FLYING_SKULL = 5
____exports.NPCNames[____exports.NPCNames.FLYING_SKULL] = "FLYING_SKULL"
____exports.NPCNames.DIRE_TOWER = 6
____exports.NPCNames[____exports.NPCNames.DIRE_TOWER] = "DIRE_TOWER"
____exports.NPCNames.QUEEN = 7
____exports.NPCNames[____exports.NPCNames.QUEEN] = "QUEEN"
____exports.NPCNames.CENTAUR = 8
____exports.NPCNames[____exports.NPCNames.CENTAUR] = "CENTAUR"
local function CustomAI(self, name, origin, options)
    local OnUnitHurt, tauntedDuration, unit, tauntedRemainingDuration
    function OnUnitHurt(self, event)
        local victim = EntIndexToHScript(event.entindex_killed)
        if unit == victim then
            tauntedRemainingDuration = tauntedDuration * 30
        end
    end
    local followRange = options.followRange or 2500
    local restTime = options.restTime or 1
    local tauntedFollowRange = followRange * 1.5
    local minFollowRange = options.minFollowRange or 0
    local behavior = options.behavior or CustomAIBehavior.FOLLOWER
    local originalPosition = origin
    local abilities = {}
    tauntedDuration = 3
    local rangeOfAction = 3000
    unit = CreateUnitByName(
        name,
        origin,
        true,
        nil,
        nil,
        DOTA_TEAM_CUSTOM_1
    )
    local state = CustomAIState.IDLE
    tauntedRemainingDuration = 0
    local remainingRestTime = 0
    local targetPosition
    local followTarget
    if options.shield then
        unit:AddNewModifier(
            unit,
            nil,
            "modifier_generic_npc_shield",
            {damage_block = unit:GetMaxHealth()}
        )
        unit:AddNewModifier(unit, nil, "modifier_generic_npc_mini_stun", {})
    end
    ListenToGameEvent(
        "entity_hurt",
        function(event) return OnUnitHurt(nil, event) end,
        nil
    )
    local function FindEnemy(self, radius)
        local units = FindUnitsInRadius(
            unit:GetTeamNumber(),
            unit:GetAbsOrigin(),
            nil,
            radius,
            DOTA_UNIT_TARGET_TEAM_ENEMY,
            DOTA_UNIT_TARGET_HERO + DOTA_UNIT_TARGET_BASIC,
            DOTA_UNIT_TARGET_FLAG_NO_INVIS,
            FIND_ANY_ORDER,
            false
        )
        if #units > 0 then
            return units[1]
        else
            return nil
        end
    end
    local function UpdateTarget(self)
        local currentFollowRange = tauntedRemainingDuration > 0 and tauntedFollowRange or followRange
        if followTarget then
            if CustomEntitiesLegacy:GetDistance(unit, followTarget) <= currentFollowRange and not followTarget:IsInvisible() then
                return
            else
                followTarget = nil
            end
        else
            followTarget = FindEnemy(nil, followRange)
        end
    end
    local function Follow(self)
        local origin = unit:GetAbsOrigin()
        UpdateTarget(nil)
        if followTarget and followTarget:IsAlive() then
            local distance = CustomEntitiesLegacy:GetDistance(unit, followTarget)
            local direction = Vector(0, 0)
            if followTarget:IsAlive() and distance > minFollowRange then
                direction = followTarget:GetAbsOrigin():__sub(origin):Normalized()
            end
            CustomEntitiesLegacy:SetDirection(unit, direction.x, direction.y)
            return true
        end
        return false
    end
    local function IsAbilityReady(self, ability)
        return ability:IsCooldownReady() and not ability:IsInAbilityPhase()
    end
    local function RegisterAbility(self, options)
        local ____options_ability_4 = options.ability
        local ____options_orderType_5 = options.orderType
        local ____temp_6 = #abilities + 1
        local function ____temp_7(____, ability, target)
            ExecuteOrderFromTable({
                OrderType = options.orderType,
                UnitIndex = unit:GetEntityIndex(),
                AbilityIndex = ability:GetEntityIndex(),
                Position = target and target:GetAbsOrigin() or nil
            })
        end
        local ____options_requirements_3
        if options.requirements then
            local ____options_requirements_2 = options.requirements
            local ____temp_0
            if options.requirements.cooldownReady ~= nil then
                ____temp_0 = options.requirements.cooldownReady
            else
                ____temp_0 = true
            end
            local ____temp_1
            if options.requirements.phaseReady ~= nil then
                ____temp_1 = options.requirements.phaseReady
            else
                ____temp_1 = true
            end
            ____options_requirements_3 = __TS__ObjectAssign({}, ____options_requirements_2, {cooldownReady = ____temp_0, phaseReady = ____temp_1})
        else
            ____options_requirements_3 = {cooldownReady = true, phaseReady = true}
        end
        local npcAbility = {
            ability = ____options_ability_4,
            orderType = ____options_orderType_5,
            priority = ____temp_6,
            cast = ____temp_7,
            requirements = ____options_requirements_3
        }
        abilities[#abilities + 1] = npcAbility
    end
    local function StartRest(self, restTime)
        remainingRestTime = restTime * 30
    end
    local function BackToOrigin(self, origin)
        local distanceFromOrigin = originalPosition:__sub(origin):Length2D()
        if rangeOfAction > distanceFromOrigin then
            return false
        end
        local direction = originalPosition:__sub(origin):Normalized()
        CustomEntitiesLegacy:SetDirection(unit, direction.x, direction.y)
        return true
    end
    local function Cast(self)
        if CustomEntitiesLegacy:IsDisplacing(unit) or CustomEntitiesLegacy:IsCasting(unit) or CustomEntitiesLegacy:IsChanneling(unit) or remainingRestTime > 0 then
            return false
        end
        local abilityToExecute = nil
        local abilityTarget = nil
        __TS__ArrayForEach(
            abilities,
            function(____, npcAbility)
                local ability = npcAbility.ability
                if npcAbility.requirements.cooldownReady then
                    if not npcAbility.ability:IsCooldownReady() then
                        return false
                    end
                end
                if npcAbility.requirements.phaseReady then
                    if npcAbility.ability:IsInAbilityPhase() then
                        return false
                    end
                end
                if npcAbility.requirements.targetInCastRange then
                    abilityTarget = FindEnemy(
                        nil,
                        ability:GetCastRange(
                            Vector(0, 0, 0),
                            nil
                        )
                    )
                    if not abilityTarget then
                        return false
                    end
                end
                if npcAbility.requirements.targetInRadius then
                    abilityTarget = FindEnemy(
                        nil,
                        ability:GetSpecialValueFor("radius")
                    )
                    if not abilityTarget then
                        return false
                    end
                end
                if abilityToExecute == nil then
                    abilityToExecute = npcAbility
                end
                if npcAbility.priority > abilityToExecute.priority then
                    abilityToExecute = npcAbility
                end
            end
        )
        if abilityToExecute then
            abilityToExecute = abilityToExecute
            abilityToExecute:cast(abilityToExecute.ability, abilityTarget)
            StartRest(nil, restTime)
            return true
        else
            return false
        end
    end
    local function StopMoving(self)
        CustomEntitiesLegacy:SetDirection(unit, 0, 0)
    end
    local function MoveTowards(self, point)
        local origin = unit:GetAbsOrigin()
        local distance = point:__sub(origin):Length2D()
        if distance < 10 then
            return false
        else
            local direction = point:__sub(origin):Normalized()
            CustomEntitiesLegacy:SetDirection(unit, direction.x, direction.y)
            return true
        end
    end
    local function PickTargetPosition(self)
        local origin = unit:GetAbsOrigin()
        local worldLimits = 1500
        local x = Clamp(
            origin.x + RandomInt(-400, 400),
            worldLimits,
            -worldLimits
        )
        local y = Clamp(
            origin.y + RandomInt(-400, 400),
            worldLimits,
            -worldLimits
        )
        targetPosition = Vector(x, y)
    end
    local function ClearTargetPosition(self)
        targetPosition = nil
    end
    local function Update(self)
        if tauntedRemainingDuration > 0 then
            tauntedRemainingDuration = tauntedRemainingDuration - 1
        end
        if remainingRestTime > 0 then
            remainingRestTime = remainingRestTime - 1
        end
        if not Cast(nil) then
            if behavior == CustomAIBehavior.STATIC then
                return
            end
            if behavior == CustomAIBehavior.WANDERER then
                if state == CustomAIState.WANDERING and targetPosition then
                    if not MoveTowards(nil, targetPosition) then
                        state = CustomAIState.IDLE
                        ClearTargetPosition(nil)
                        StopMoving(nil)
                    end
                else
                    state = CustomAIState.WANDERING
                    PickTargetPosition(nil)
                end
            else
                if not Follow(nil) then
                    StopMoving(nil)
                end
            end
        else
            remainingRestTime = 1 * 30
            ClearTargetPosition(nil)
            StopMoving(nil)
        end
    end
    return {
        unit = unit,
        IsAbilityReady = IsAbilityReady,
        RegisterAbility = RegisterAbility,
        Update = Update,
        BackToOrigin = BackToOrigin
    }
end
____exports.CustomAIMeta = {
    [____exports.NPCNames.QUEEN] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "npc_dota_hero_queenofpain", origin, {minFollowRange = 500})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("queen_scream"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("queen_dodge"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("queen_blink"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("queen_daggers"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("queen_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("queen_wave"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            return ai
        end,
        tier = ____exports.CustomAITier.BOSS
    },
    [____exports.NPCNames.CENTAUR] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "npc_dota_hero_centaur", origin, {})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("centaur_axe_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInRadius = true}
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("centaur_range_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("centaur_short_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET,
                requirements = {targetInRadius = true}
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("centaur_charge"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("centaur_rage"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET
            })
            return ai
        end,
        tier = ____exports.CustomAITier.BOSS
    },
    [____exports.NPCNames.RADIANT_ZOMBIE_RANGE_MEGA] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "radiant_zombie_healer", origin, {behavior = CustomAIBehavior.WANDERER, shield = true})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("radiant_zombie_heal_aura"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_zombie_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            return ai
        end,
        tier = ____exports.CustomAITier.MID
    },
    [____exports.NPCNames.DIRE_ZOMBIE_RANGE] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "dire_zombie_range", origin, {behavior = CustomAIBehavior.WANDERER, shield = true})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_zombie_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            return ai
        end,
        tier = ____exports.CustomAITier.BASIC
    },
    [____exports.NPCNames.DIRE_ZOMBIE_RANGE_MEGA] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "dire_zombie_range_mega", origin, {behavior = CustomAIBehavior.WANDERER, shield = true})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_zombie_rage_aura"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_zombie_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            return ai
        end,
        tier = ____exports.CustomAITier.MID
    },
    [____exports.NPCNames.DIRE_ZOMBIE_MEELE_MEGA] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "dire_zombie_meele_mega", origin, {followRange = 1500, minFollowRange = 200, behavior = CustomAIBehavior.FOLLOWER, shield = true})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_zombie_attack_meele"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai.unit:SetHullRadius(95)
            return ai
        end,
        tier = ____exports.CustomAITier.MID
    },
    [____exports.NPCNames.RADIANT_ZOMBIE_MEELE_MEGA] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "radiant_zombie_meele", origin, {followRange = 1500, minFollowRange = 200, behavior = CustomAIBehavior.FOLLOWER, shield = true})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_zombie_attack_meele"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai.unit:SetHullRadius(95)
            return ai
        end,
        tier = ____exports.CustomAITier.BASIC
    },
    [____exports.NPCNames.FLYING_SKULL] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "flying_skull", origin, {followRange = 1000, minFollowRange = 150, behavior = CustomAIBehavior.FOLLOWER, shield = true})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("flying_skull_dash"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            return ai
        end,
        tier = ____exports.CustomAITier.BASIC
    },
    [____exports.NPCNames.DIRE_TOWER] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "dire_tower", origin, {behavior = CustomAIBehavior.STATIC})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_tower_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai.unit:SetHullRadius(100)
            return ai
        end,
        tier = ____exports.CustomAITier.HIGH
    }
}
return ____exports

local ____lualib = require("lualib_bundle")
local __TS__ObjectAssign = ____lualib.__TS__ObjectAssign
local __TS__ArrayForEach = ____lualib.__TS__ArrayForEach
local __TS__SourceMapTraceBack = ____lualib.__TS__SourceMapTraceBack
__TS__SourceMapTraceBack(debug.getinfo(1).short_src, {["7"] = 2,["8"] = 2,["9"] = 2,["10"] = 2,["11"] = 2,["12"] = 2,["13"] = 2,["14"] = 8,["15"] = 8,["16"] = 8,["17"] = 8,["18"] = 8,["19"] = 8,["20"] = 8,["21"] = 14,["22"] = 15,["23"] = 15,["24"] = 16,["25"] = 16,["26"] = 17,["27"] = 17,["28"] = 18,["29"] = 18,["30"] = 21,["31"] = 22,["32"] = 22,["33"] = 23,["34"] = 23,["35"] = 24,["36"] = 24,["37"] = 25,["38"] = 25,["39"] = 26,["40"] = 26,["41"] = 27,["42"] = 27,["43"] = 28,["44"] = 28,["45"] = 29,["46"] = 29,["47"] = 30,["48"] = 30,["49"] = 69,["50"] = 77,["51"] = 280,["52"] = 281,["53"] = 282,["54"] = 283,["57"] = 70,["58"] = 71,["59"] = 72,["60"] = 73,["61"] = 74,["62"] = 75,["63"] = 76,["64"] = 77,["65"] = 78,["66"] = 79,["67"] = 79,["68"] = 79,["69"] = 79,["70"] = 79,["71"] = 79,["72"] = 79,["73"] = 79,["74"] = 80,["75"] = 81,["76"] = 82,["77"] = 83,["78"] = 84,["79"] = 86,["80"] = 87,["81"] = 87,["82"] = 87,["83"] = 87,["84"] = 87,["85"] = 87,["86"] = 90,["88"] = 93,["89"] = 93,["90"] = 93,["91"] = 93,["92"] = 93,["93"] = 95,["94"] = 96,["95"] = 96,["96"] = 96,["97"] = 96,["98"] = 96,["99"] = 96,["100"] = 96,["101"] = 96,["102"] = 96,["103"] = 96,["104"] = 96,["105"] = 108,["106"] = 109,["108"] = 111,["110"] = 95,["111"] = 115,["112"] = 116,["113"] = 118,["114"] = 119,["117"] = 122,["120"] = 125,["122"] = 115,["123"] = 129,["124"] = 130,["125"] = 131,["126"] = 133,["127"] = 134,["128"] = 135,["129"] = 137,["130"] = 138,["132"] = 141,["133"] = 142,["135"] = 144,["136"] = 129,["137"] = 147,["138"] = 148,["139"] = 147,["140"] = 151,["141"] = 153,["142"] = 154,["143"] = 155,["144"] = 156,["145"] = 157,["146"] = 157,["147"] = 157,["148"] = 157,["149"] = 157,["150"] = 157,["151"] = 156,["152"] = 164,["153"] = 164,["154"] = 166,["155"] = 167,["156"] = 167,["157"] = 167,["159"] = 167,["161"] = 168,["162"] = 168,["163"] = 168,["165"] = 168,["167"] = 165,["169"] = 170,["171"] = 152,["172"] = 152,["173"] = 152,["174"] = 152,["175"] = 152,["176"] = 152,["177"] = 152,["178"] = 175,["179"] = 151,["180"] = 178,["181"] = 179,["182"] = 178,["183"] = 182,["184"] = 183,["185"] = 185,["186"] = 186,["188"] = 189,["189"] = 190,["190"] = 191,["191"] = 182,["192"] = 194,["193"] = 196,["194"] = 201,["196"] = 204,["197"] = 205,["198"] = 206,["199"] = 206,["200"] = 206,["201"] = 207,["202"] = 209,["203"] = 210,["204"] = 211,["205"] = 212,["208"] = 215,["209"] = 216,["210"] = 217,["213"] = 220,["214"] = 221,["215"] = 221,["216"] = 221,["217"] = 221,["218"] = 221,["219"] = 221,["220"] = 221,["221"] = 222,["222"] = 223,["225"] = 226,["226"] = 227,["227"] = 227,["228"] = 227,["229"] = 227,["230"] = 228,["231"] = 229,["235"] = 233,["236"] = 234,["238"] = 236,["239"] = 237,["241"] = 206,["242"] = 206,["243"] = 241,["244"] = 242,["245"] = 243,["246"] = 244,["247"] = 245,["249"] = 247,["251"] = 194,["252"] = 251,["253"] = 252,["254"] = 251,["255"] = 255,["256"] = 256,["257"] = 257,["258"] = 259,["259"] = 260,["261"] = 262,["262"] = 263,["263"] = 264,["265"] = 255,["266"] = 268,["267"] = 269,["268"] = 270,["269"] = 271,["270"] = 271,["271"] = 271,["272"] = 271,["273"] = 271,["274"] = 272,["275"] = 272,["276"] = 272,["277"] = 272,["278"] = 272,["279"] = 273,["280"] = 268,["281"] = 276,["282"] = 277,["283"] = 276,["284"] = 287,["285"] = 288,["286"] = 289,["288"] = 291,["289"] = 292,["291"] = 294,["292"] = 295,["295"] = 298,["296"] = 299,["297"] = 300,["298"] = 301,["299"] = 302,["300"] = 303,["303"] = 306,["304"] = 307,["307"] = 310,["308"] = 311,["312"] = 315,["313"] = 316,["314"] = 317,["316"] = 287,["317"] = 321,["318"] = 321,["319"] = 321,["320"] = 321,["321"] = 321,["322"] = 321,["323"] = 321,["324"] = 69,["325"] = 330,["326"] = 336,["327"] = 337,["328"] = 338,["329"] = 342,["330"] = 342,["331"] = 342,["332"] = 342,["333"] = 346,["334"] = 346,["335"] = 346,["336"] = 346,["337"] = 350,["338"] = 350,["339"] = 350,["340"] = 350,["341"] = 350,["342"] = 357,["343"] = 357,["344"] = 357,["345"] = 357,["346"] = 361,["347"] = 361,["348"] = 361,["349"] = 361,["350"] = 361,["351"] = 368,["352"] = 368,["353"] = 368,["354"] = 368,["355"] = 368,["356"] = 375,["357"] = 336,["358"] = 336,["359"] = 335,["360"] = 379,["361"] = 380,["362"] = 381,["363"] = 383,["364"] = 383,["365"] = 383,["366"] = 383,["367"] = 383,["368"] = 390,["369"] = 390,["370"] = 390,["371"] = 390,["372"] = 390,["373"] = 397,["374"] = 397,["375"] = 397,["376"] = 397,["377"] = 397,["378"] = 404,["379"] = 404,["380"] = 404,["381"] = 404,["382"] = 404,["383"] = 411,["384"] = 411,["385"] = 411,["386"] = 411,["387"] = 415,["388"] = 379,["389"] = 379,["390"] = 335,["391"] = 419,["392"] = 420,["393"] = 421,["394"] = 426,["395"] = 426,["396"] = 426,["397"] = 426,["398"] = 430,["399"] = 430,["400"] = 430,["401"] = 430,["402"] = 430,["403"] = 437,["404"] = 419,["405"] = 419,["406"] = 335,["407"] = 441,["408"] = 442,["409"] = 443,["410"] = 448,["411"] = 448,["412"] = 448,["413"] = 448,["414"] = 448,["415"] = 455,["416"] = 441,["417"] = 441,["418"] = 335,["419"] = 459,["420"] = 460,["421"] = 461,["422"] = 466,["423"] = 466,["424"] = 466,["425"] = 466,["426"] = 470,["427"] = 470,["428"] = 470,["429"] = 470,["430"] = 470,["431"] = 477,["432"] = 459,["433"] = 459,["434"] = 335,["435"] = 481,["436"] = 482,["437"] = 483,["438"] = 490,["439"] = 490,["440"] = 490,["441"] = 490,["442"] = 490,["443"] = 498,["444"] = 499,["445"] = 481,["446"] = 481,["447"] = 335,["448"] = 503,["449"] = 504,["450"] = 505,["451"] = 512,["452"] = 512,["453"] = 512,["454"] = 512,["455"] = 512,["456"] = 520,["457"] = 521,["458"] = 503,["459"] = 503,["460"] = 335,["461"] = 525,["462"] = 526,["463"] = 527,["464"] = 534,["465"] = 534,["466"] = 534,["467"] = 534,["468"] = 534,["469"] = 542,["470"] = 525,["471"] = 525,["472"] = 335,["473"] = 546,["474"] = 547,["475"] = 548,["476"] = 552,["477"] = 552,["478"] = 552,["479"] = 552,["480"] = 552,["481"] = 559,["482"] = 560,["483"] = 546,["484"] = 546,["485"] = 335,["486"] = 335});
local ____exports = {}
local CustomAIState = CustomAIState or ({})
CustomAIState.IDLE = 0
CustomAIState[CustomAIState.IDLE] = "IDLE"
CustomAIState.WANDERING = 1
CustomAIState[CustomAIState.WANDERING] = "WANDERING"
CustomAIState.RESTING = 2
CustomAIState[CustomAIState.RESTING] = "RESTING"
local CustomAIBehavior = CustomAIBehavior or ({})
CustomAIBehavior.FOLLOWER = 0
CustomAIBehavior[CustomAIBehavior.FOLLOWER] = "FOLLOWER"
CustomAIBehavior.WANDERER = 1
CustomAIBehavior[CustomAIBehavior.WANDERER] = "WANDERER"
CustomAIBehavior.STATIC = 2
CustomAIBehavior[CustomAIBehavior.STATIC] = "STATIC"
____exports.CustomAITier = CustomAITier or ({})
____exports.CustomAITier.BASIC = 1
____exports.CustomAITier[____exports.CustomAITier.BASIC] = "BASIC"
____exports.CustomAITier.MID = 2
____exports.CustomAITier[____exports.CustomAITier.MID] = "MID"
____exports.CustomAITier.HIGH = 3
____exports.CustomAITier[____exports.CustomAITier.HIGH] = "HIGH"
____exports.CustomAITier.BOSS = 4
____exports.CustomAITier[____exports.CustomAITier.BOSS] = "BOSS"
____exports.NPCNames = NPCNames or ({})
____exports.NPCNames.DIRE_ZOMBIE_RANGE = 0
____exports.NPCNames[____exports.NPCNames.DIRE_ZOMBIE_RANGE] = "DIRE_ZOMBIE_RANGE"
____exports.NPCNames.DIRE_ZOMBIE_RANGE_MEGA = 1
____exports.NPCNames[____exports.NPCNames.DIRE_ZOMBIE_RANGE_MEGA] = "DIRE_ZOMBIE_RANGE_MEGA"
____exports.NPCNames.DIRE_ZOMBIE_MEELE_MEGA = 2
____exports.NPCNames[____exports.NPCNames.DIRE_ZOMBIE_MEELE_MEGA] = "DIRE_ZOMBIE_MEELE_MEGA"
____exports.NPCNames.RADIANT_ZOMBIE_RANGE_MEGA = 3
____exports.NPCNames[____exports.NPCNames.RADIANT_ZOMBIE_RANGE_MEGA] = "RADIANT_ZOMBIE_RANGE_MEGA"
____exports.NPCNames.RADIANT_ZOMBIE_MEELE_MEGA = 4
____exports.NPCNames[____exports.NPCNames.RADIANT_ZOMBIE_MEELE_MEGA] = "RADIANT_ZOMBIE_MEELE_MEGA"
____exports.NPCNames.FLYING_SKULL = 5
____exports.NPCNames[____exports.NPCNames.FLYING_SKULL] = "FLYING_SKULL"
____exports.NPCNames.DIRE_TOWER = 6
____exports.NPCNames[____exports.NPCNames.DIRE_TOWER] = "DIRE_TOWER"
____exports.NPCNames.QUEEN = 7
____exports.NPCNames[____exports.NPCNames.QUEEN] = "QUEEN"
____exports.NPCNames.CENTAUR = 8
____exports.NPCNames[____exports.NPCNames.CENTAUR] = "CENTAUR"
local function CustomAI(self, name, origin, options)
    local OnUnitHurt, tauntedDuration, unit, tauntedRemainingDuration
    function OnUnitHurt(self, event)
        local victim = EntIndexToHScript(event.entindex_killed)
        if unit == victim then
            tauntedRemainingDuration = tauntedDuration * 30
        end
    end
    local followRange = options.followRange or 2500
    local restTime = options.restTime or 1
    local tauntedFollowRange = followRange * 1.5
    local minFollowRange = options.minFollowRange or 0
    local behavior = options.behavior or CustomAIBehavior.FOLLOWER
    local originalPosition = origin
    local abilities = {}
    tauntedDuration = 3
    local rangeOfAction = 3000
    unit = CreateUnitByName(
        name,
        origin,
        true,
        nil,
        nil,
        DOTA_TEAM_CUSTOM_1
    )
    local state = CustomAIState.IDLE
    tauntedRemainingDuration = 0
    local remainingRestTime = 0
    local targetPosition
    local followTarget
    if options.shield then
        unit:AddNewModifier(
            unit,
            nil,
            "modifier_generic_npc_shield",
            {damage_block = unit:GetMaxHealth()}
        )
        unit:AddNewModifier(unit, nil, "modifier_generic_npc_mini_stun", {})
    end
    ListenToGameEvent(
        "entity_hurt",
        function(event) return OnUnitHurt(nil, event) end,
        nil
    )
    local function FindEnemy(self, radius)
        local units = FindUnitsInRadius(
            unit:GetTeamNumber(),
            unit:GetAbsOrigin(),
            nil,
            radius,
            DOTA_UNIT_TARGET_TEAM_ENEMY,
            DOTA_UNIT_TARGET_HERO + DOTA_UNIT_TARGET_BASIC,
            DOTA_UNIT_TARGET_FLAG_NO_INVIS,
            FIND_ANY_ORDER,
            false
        )
        if #units > 0 then
            return units[1]
        else
            return nil
        end
    end
    local function UpdateTarget(self)
        local currentFollowRange = tauntedRemainingDuration > 0 and tauntedFollowRange or followRange
        if followTarget then
            if CustomEntitiesLegacy:GetDistance(unit, followTarget) <= currentFollowRange and not followTarget:IsInvisible() then
                return
            else
                followTarget = nil
            end
        else
            followTarget = FindEnemy(nil, followRange)
        end
    end
    local function Follow(self)
        local origin = unit:GetAbsOrigin()
        UpdateTarget(nil)
        if followTarget and followTarget:IsAlive() then
            local distance = CustomEntitiesLegacy:GetDistance(unit, followTarget)
            local direction = Vector(0, 0)
            if followTarget:IsAlive() and distance > minFollowRange then
                direction = followTarget:GetAbsOrigin():__sub(origin):Normalized()
            end
            CustomEntitiesLegacy:SetDirection(unit, direction.x, direction.y)
            return true
        end
        return false
    end
    local function IsAbilityReady(self, ability)
        return ability:IsCooldownReady() and not ability:IsInAbilityPhase()
    end
    local function RegisterAbility(self, options)
        local ____options_ability_4 = options.ability
        local ____options_orderType_5 = options.orderType
        local ____temp_6 = #abilities + 1
        local function ____temp_7(____, ability, target)
            ExecuteOrderFromTable({
                OrderType = options.orderType,
                UnitIndex = unit:GetEntityIndex(),
                AbilityIndex = ability:GetEntityIndex(),
                Position = target and target:GetAbsOrigin() or nil
            })
        end
        local ____options_requirements_3
        if options.requirements then
            local ____options_requirements_2 = options.requirements
            local ____temp_0
            if options.requirements.cooldownReady ~= nil then
                ____temp_0 = options.requirements.cooldownReady
            else
                ____temp_0 = true
            end
            local ____temp_1
            if options.requirements.phaseReady ~= nil then
                ____temp_1 = options.requirements.phaseReady
            else
                ____temp_1 = true
            end
            ____options_requirements_3 = __TS__ObjectAssign({}, ____options_requirements_2, {cooldownReady = ____temp_0, phaseReady = ____temp_1})
        else
            ____options_requirements_3 = {cooldownReady = true, phaseReady = true}
        end
        local npcAbility = {
            ability = ____options_ability_4,
            orderType = ____options_orderType_5,
            priority = ____temp_6,
            cast = ____temp_7,
            requirements = ____options_requirements_3
        }
        abilities[#abilities + 1] = npcAbility
    end
    local function StartRest(self, restTime)
        remainingRestTime = restTime * 30
    end
    local function BackToOrigin(self, origin)
        local distanceFromOrigin = originalPosition:__sub(origin):Length2D()
        if rangeOfAction > distanceFromOrigin then
            return false
        end
        local direction = originalPosition:__sub(origin):Normalized()
        CustomEntitiesLegacy:SetDirection(unit, direction.x, direction.y)
        return true
    end
    local function Cast(self)
        if CustomEntitiesLegacy:IsDisplacing(unit) or CustomEntitiesLegacy:IsCasting(unit) or CustomEntitiesLegacy:IsChanneling(unit) or remainingRestTime > 0 then
            return false
        end
        local abilityToExecute = nil
        local abilityTarget = nil
        __TS__ArrayForEach(
            abilities,
            function(____, npcAbility)
                local ability = npcAbility.ability
                if npcAbility.requirements then
                    if npcAbility.requirements.cooldownReady then
                        if not npcAbility.ability:IsCooldownReady() then
                            return false
                        end
                    end
                    if npcAbility.requirements.phaseReady then
                        if npcAbility.ability:IsInAbilityPhase() then
                            return false
                        end
                    end
                    if npcAbility.requirements.targetInCastRange then
                        abilityTarget = FindEnemy(
                            nil,
                            ability:GetCastRange(
                                Vector(0, 0, 0),
                                nil
                            )
                        )
                        if not abilityTarget then
                            return false
                        end
                    end
                    if npcAbility.requirements.targetInRadius then
                        abilityTarget = FindEnemy(
                            nil,
                            ability:GetSpecialValueFor("radius")
                        )
                        if not abilityTarget then
                            return false
                        end
                    end
                end
                if abilityToExecute == nil then
                    abilityToExecute = npcAbility
                end
                if npcAbility.priority > abilityToExecute.priority then
                    abilityToExecute = npcAbility
                end
            end
        )
        if abilityToExecute then
            abilityToExecute = abilityToExecute
            abilityToExecute:cast(abilityToExecute.ability, abilityTarget)
            StartRest(nil, restTime)
            return true
        else
            return false
        end
    end
    local function StopMoving(self)
        CustomEntitiesLegacy:SetDirection(unit, 0, 0)
    end
    local function MoveTowards(self, point)
        local origin = unit:GetAbsOrigin()
        local distance = point:__sub(origin):Length2D()
        if distance < 10 then
            return false
        else
            local direction = point:__sub(origin):Normalized()
            CustomEntitiesLegacy:SetDirection(unit, direction.x, direction.y)
            return true
        end
    end
    local function PickTargetPosition(self)
        local origin = unit:GetAbsOrigin()
        local worldLimits = 1500
        local x = Clamp(
            origin.x + RandomInt(-400, 400),
            worldLimits,
            -worldLimits
        )
        local y = Clamp(
            origin.y + RandomInt(-400, 400),
            worldLimits,
            -worldLimits
        )
        targetPosition = Vector(x, y)
    end
    local function ClearTargetPosition(self)
        targetPosition = nil
    end
    local function Update(self)
        if tauntedRemainingDuration > 0 then
            tauntedRemainingDuration = tauntedRemainingDuration - 1
        end
        if remainingRestTime > 0 then
            remainingRestTime = remainingRestTime - 1
        end
        if not Cast(nil) then
            if behavior == CustomAIBehavior.STATIC then
                return
            end
            if behavior == CustomAIBehavior.WANDERER then
                if state == CustomAIState.WANDERING and targetPosition then
                    if not MoveTowards(nil, targetPosition) then
                        state = CustomAIState.IDLE
                        ClearTargetPosition(nil)
                        StopMoving(nil)
                    end
                else
                    state = CustomAIState.WANDERING
                    PickTargetPosition(nil)
                end
            else
                if not Follow(nil) then
                    StopMoving(nil)
                end
            end
        else
            remainingRestTime = 1 * 30
            ClearTargetPosition(nil)
            StopMoving(nil)
        end
    end
    return {
        unit = unit,
        IsAbilityReady = IsAbilityReady,
        RegisterAbility = RegisterAbility,
        Update = Update,
        BackToOrigin = BackToOrigin
    }
end
____exports.CustomAIMeta = {
    [____exports.NPCNames.QUEEN] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "npc_dota_hero_queenofpain", origin, {minFollowRange = 500})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("queen_scream"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("queen_dodge"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("queen_blink"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("queen_daggers"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("queen_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("queen_wave"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            return ai
        end,
        tier = ____exports.CustomAITier.BOSS
    },
    [____exports.NPCNames.CENTAUR] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "npc_dota_hero_centaur", origin, {})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("centaur_axe_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInRadius = true}
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("centaur_range_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("centaur_short_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET,
                requirements = {targetInRadius = true}
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("centaur_charge"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("centaur_rage"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET
            })
            return ai
        end,
        tier = ____exports.CustomAITier.BOSS
    },
    [____exports.NPCNames.RADIANT_ZOMBIE_RANGE_MEGA] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "radiant_zombie_healer", origin, {behavior = CustomAIBehavior.WANDERER, shield = true})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("radiant_zombie_heal_aura"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_zombie_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            return ai
        end,
        tier = ____exports.CustomAITier.MID
    },
    [____exports.NPCNames.DIRE_ZOMBIE_RANGE] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "dire_zombie_range", origin, {behavior = CustomAIBehavior.WANDERER, shield = true})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_zombie_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            return ai
        end,
        tier = ____exports.CustomAITier.BASIC
    },
    [____exports.NPCNames.DIRE_ZOMBIE_RANGE_MEGA] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "dire_zombie_range_mega", origin, {behavior = CustomAIBehavior.WANDERER, shield = true})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_zombie_rage_aura"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_zombie_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            return ai
        end,
        tier = ____exports.CustomAITier.MID
    },
    [____exports.NPCNames.DIRE_ZOMBIE_MEELE_MEGA] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "dire_zombie_meele_mega", origin, {followRange = 1500, minFollowRange = 200, behavior = CustomAIBehavior.FOLLOWER, shield = true})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_zombie_attack_meele"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai.unit:SetHullRadius(95)
            return ai
        end,
        tier = ____exports.CustomAITier.MID
    },
    [____exports.NPCNames.RADIANT_ZOMBIE_MEELE_MEGA] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "radiant_zombie_meele", origin, {followRange = 1500, minFollowRange = 200, behavior = CustomAIBehavior.FOLLOWER, shield = true})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_zombie_attack_meele"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai.unit:SetHullRadius(95)
            return ai
        end,
        tier = ____exports.CustomAITier.BASIC
    },
    [____exports.NPCNames.FLYING_SKULL] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "flying_skull", origin, {followRange = 1000, minFollowRange = 150, behavior = CustomAIBehavior.FOLLOWER, shield = true})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("flying_skull_dash"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            return ai
        end,
        tier = ____exports.CustomAITier.BASIC
    },
    [____exports.NPCNames.DIRE_TOWER] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "dire_tower", origin, {behavior = CustomAIBehavior.STATIC})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_tower_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai.unit:SetHullRadius(100)
            return ai
        end,
        tier = ____exports.CustomAITier.HIGH
    }
}
return ____exports

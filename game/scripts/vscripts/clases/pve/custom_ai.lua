local ____lualib = require("lualib_bundle")
local __TS__ObjectAssign = ____lualib.__TS__ObjectAssign
local __TS__ArrayForEach = ____lualib.__TS__ArrayForEach
local __TS__SourceMapTraceBack = ____lualib.__TS__SourceMapTraceBack
__TS__SourceMapTraceBack(debug.getinfo(1).short_src, {["7"] = 2,["8"] = 2,["9"] = 2,["10"] = 2,["11"] = 2,["12"] = 2,["13"] = 2,["14"] = 8,["15"] = 8,["16"] = 8,["17"] = 8,["18"] = 8,["19"] = 8,["20"] = 8,["21"] = 14,["22"] = 15,["23"] = 15,["24"] = 16,["25"] = 16,["26"] = 17,["27"] = 17,["28"] = 18,["29"] = 18,["30"] = 21,["31"] = 22,["32"] = 22,["33"] = 23,["34"] = 23,["35"] = 24,["36"] = 24,["37"] = 25,["38"] = 25,["39"] = 26,["40"] = 26,["41"] = 27,["42"] = 27,["43"] = 28,["44"] = 28,["45"] = 29,["46"] = 29,["47"] = 30,["48"] = 30,["49"] = 69,["50"] = 81,["51"] = 304,["52"] = 305,["53"] = 306,["54"] = 307,["57"] = 74,["58"] = 75,["59"] = 76,["60"] = 77,["61"] = 78,["62"] = 79,["63"] = 80,["64"] = 81,["65"] = 82,["66"] = 83,["67"] = 83,["68"] = 83,["69"] = 83,["70"] = 83,["71"] = 83,["72"] = 83,["73"] = 83,["74"] = 91,["75"] = 92,["76"] = 93,["77"] = 94,["78"] = 95,["79"] = 97,["80"] = 98,["81"] = 98,["82"] = 98,["83"] = 98,["84"] = 98,["85"] = 98,["86"] = 101,["88"] = 104,["89"] = 104,["90"] = 104,["91"] = 104,["92"] = 104,["93"] = 106,["94"] = 107,["95"] = 107,["96"] = 107,["97"] = 107,["98"] = 107,["99"] = 107,["100"] = 107,["101"] = 107,["102"] = 107,["103"] = 107,["104"] = 107,["105"] = 119,["106"] = 120,["108"] = 122,["110"] = 106,["111"] = 126,["112"] = 127,["113"] = 130,["114"] = 132,["117"] = 138,["120"] = 141,["122"] = 126,["123"] = 145,["124"] = 146,["125"] = 147,["126"] = 149,["127"] = 150,["128"] = 151,["129"] = 153,["130"] = 154,["132"] = 157,["133"] = 158,["135"] = 160,["136"] = 145,["137"] = 163,["138"] = 164,["139"] = 163,["140"] = 167,["141"] = 169,["142"] = 170,["143"] = 171,["144"] = 172,["145"] = 173,["146"] = 173,["147"] = 173,["148"] = 173,["149"] = 173,["150"] = 173,["151"] = 172,["152"] = 180,["153"] = 180,["154"] = 182,["155"] = 184,["156"] = 184,["157"] = 185,["159"] = 186,["161"] = 188,["162"] = 188,["163"] = 189,["165"] = 190,["167"] = 181,["169"] = 192,["171"] = 168,["172"] = 168,["173"] = 168,["174"] = 168,["175"] = 168,["176"] = 168,["177"] = 168,["178"] = 197,["179"] = 167,["180"] = 200,["181"] = 201,["182"] = 200,["183"] = 204,["184"] = 205,["185"] = 207,["186"] = 208,["188"] = 211,["189"] = 212,["190"] = 213,["191"] = 204,["192"] = 216,["193"] = 218,["194"] = 223,["196"] = 226,["197"] = 227,["198"] = 228,["199"] = 228,["200"] = 228,["201"] = 229,["202"] = 231,["203"] = 232,["204"] = 233,["205"] = 234,["208"] = 237,["209"] = 238,["210"] = 239,["213"] = 242,["214"] = 243,["215"] = 243,["216"] = 244,["217"] = 244,["218"] = 244,["219"] = 243,["220"] = 243,["221"] = 246,["222"] = 247,["225"] = 250,["226"] = 251,["227"] = 251,["228"] = 251,["229"] = 251,["230"] = 252,["231"] = 253,["235"] = 257,["236"] = 258,["238"] = 260,["239"] = 261,["241"] = 228,["242"] = 228,["243"] = 265,["244"] = 266,["245"] = 267,["246"] = 268,["247"] = 269,["249"] = 271,["251"] = 216,["252"] = 275,["253"] = 276,["254"] = 275,["255"] = 279,["256"] = 280,["257"] = 281,["258"] = 283,["259"] = 284,["261"] = 286,["262"] = 287,["263"] = 288,["265"] = 279,["266"] = 292,["267"] = 293,["268"] = 294,["269"] = 295,["270"] = 295,["271"] = 295,["272"] = 295,["273"] = 295,["274"] = 296,["275"] = 296,["276"] = 296,["277"] = 296,["278"] = 296,["279"] = 297,["280"] = 292,["281"] = 300,["282"] = 301,["283"] = 300,["284"] = 311,["285"] = 312,["286"] = 313,["288"] = 315,["289"] = 316,["291"] = 318,["292"] = 319,["295"] = 322,["296"] = 323,["297"] = 324,["298"] = 325,["299"] = 326,["300"] = 327,["303"] = 330,["304"] = 331,["307"] = 334,["308"] = 335,["312"] = 339,["313"] = 340,["314"] = 341,["316"] = 311,["317"] = 345,["318"] = 345,["319"] = 345,["320"] = 345,["321"] = 345,["322"] = 345,["323"] = 345,["324"] = 69,["325"] = 354,["326"] = 360,["327"] = 361,["328"] = 362,["329"] = 366,["330"] = 366,["331"] = 366,["332"] = 366,["333"] = 370,["334"] = 370,["335"] = 370,["336"] = 370,["337"] = 374,["338"] = 374,["339"] = 374,["340"] = 374,["341"] = 374,["342"] = 381,["343"] = 381,["344"] = 381,["345"] = 381,["346"] = 385,["347"] = 385,["348"] = 385,["349"] = 385,["350"] = 385,["351"] = 392,["352"] = 392,["353"] = 392,["354"] = 392,["355"] = 392,["356"] = 399,["357"] = 360,["358"] = 360,["359"] = 359,["360"] = 403,["361"] = 404,["362"] = 405,["363"] = 407,["364"] = 407,["365"] = 407,["366"] = 407,["367"] = 407,["368"] = 414,["369"] = 414,["370"] = 414,["371"] = 414,["372"] = 414,["373"] = 421,["374"] = 421,["375"] = 421,["376"] = 421,["377"] = 421,["378"] = 428,["379"] = 428,["380"] = 428,["381"] = 428,["382"] = 428,["383"] = 435,["384"] = 435,["385"] = 435,["386"] = 435,["387"] = 439,["388"] = 403,["389"] = 403,["390"] = 359,["391"] = 443,["392"] = 444,["393"] = 445,["394"] = 450,["395"] = 450,["396"] = 450,["397"] = 450,["398"] = 454,["399"] = 454,["400"] = 454,["401"] = 454,["402"] = 454,["403"] = 461,["404"] = 443,["405"] = 443,["406"] = 359,["407"] = 465,["408"] = 466,["409"] = 467,["410"] = 472,["411"] = 472,["412"] = 472,["413"] = 472,["414"] = 472,["415"] = 479,["416"] = 465,["417"] = 465,["418"] = 359,["419"] = 483,["420"] = 484,["421"] = 485,["422"] = 490,["423"] = 490,["424"] = 490,["425"] = 490,["426"] = 494,["427"] = 494,["428"] = 494,["429"] = 494,["430"] = 494,["431"] = 501,["432"] = 483,["433"] = 483,["434"] = 359,["435"] = 505,["436"] = 506,["437"] = 507,["438"] = 514,["439"] = 514,["440"] = 514,["441"] = 514,["442"] = 514,["443"] = 522,["444"] = 523,["445"] = 505,["446"] = 505,["447"] = 359,["448"] = 527,["449"] = 528,["450"] = 529,["451"] = 536,["452"] = 536,["453"] = 536,["454"] = 536,["455"] = 536,["456"] = 544,["457"] = 545,["458"] = 527,["459"] = 527,["460"] = 359,["461"] = 549,["462"] = 550,["463"] = 551,["464"] = 558,["465"] = 558,["466"] = 558,["467"] = 558,["468"] = 558,["469"] = 566,["470"] = 549,["471"] = 549,["472"] = 359,["473"] = 570,["474"] = 571,["475"] = 572,["476"] = 576,["477"] = 576,["478"] = 576,["479"] = 576,["480"] = 576,["481"] = 583,["482"] = 584,["483"] = 570,["484"] = 570,["485"] = 359,["486"] = 359});
local ____exports = {}
local CustomAIState = CustomAIState or ({})
CustomAIState.IDLE = 0
CustomAIState[CustomAIState.IDLE] = "IDLE"
CustomAIState.WANDERING = 1
CustomAIState[CustomAIState.WANDERING] = "WANDERING"
CustomAIState.RESTING = 2
CustomAIState[CustomAIState.RESTING] = "RESTING"
local CustomAIBehavior = CustomAIBehavior or ({})
CustomAIBehavior.FOLLOWER = 0
CustomAIBehavior[CustomAIBehavior.FOLLOWER] = "FOLLOWER"
CustomAIBehavior.WANDERER = 1
CustomAIBehavior[CustomAIBehavior.WANDERER] = "WANDERER"
CustomAIBehavior.STATIC = 2
CustomAIBehavior[CustomAIBehavior.STATIC] = "STATIC"
____exports.CustomAITier = CustomAITier or ({})
____exports.CustomAITier.BASIC = 1
____exports.CustomAITier[____exports.CustomAITier.BASIC] = "BASIC"
____exports.CustomAITier.MID = 2
____exports.CustomAITier[____exports.CustomAITier.MID] = "MID"
____exports.CustomAITier.HIGH = 3
____exports.CustomAITier[____exports.CustomAITier.HIGH] = "HIGH"
____exports.CustomAITier.BOSS = 4
____exports.CustomAITier[____exports.CustomAITier.BOSS] = "BOSS"
____exports.NPCNames = NPCNames or ({})
____exports.NPCNames.DIRE_ZOMBIE_RANGE = 0
____exports.NPCNames[____exports.NPCNames.DIRE_ZOMBIE_RANGE] = "DIRE_ZOMBIE_RANGE"
____exports.NPCNames.DIRE_ZOMBIE_RANGE_MEGA = 1
____exports.NPCNames[____exports.NPCNames.DIRE_ZOMBIE_RANGE_MEGA] = "DIRE_ZOMBIE_RANGE_MEGA"
____exports.NPCNames.DIRE_ZOMBIE_MEELE_MEGA = 2
____exports.NPCNames[____exports.NPCNames.DIRE_ZOMBIE_MEELE_MEGA] = "DIRE_ZOMBIE_MEELE_MEGA"
____exports.NPCNames.RADIANT_ZOMBIE_RANGE_MEGA = 3
____exports.NPCNames[____exports.NPCNames.RADIANT_ZOMBIE_RANGE_MEGA] = "RADIANT_ZOMBIE_RANGE_MEGA"
____exports.NPCNames.RADIANT_ZOMBIE_MEELE_MEGA = 4
____exports.NPCNames[____exports.NPCNames.RADIANT_ZOMBIE_MEELE_MEGA] = "RADIANT_ZOMBIE_MEELE_MEGA"
____exports.NPCNames.FLYING_SKULL = 5
____exports.NPCNames[____exports.NPCNames.FLYING_SKULL] = "FLYING_SKULL"
____exports.NPCNames.DIRE_TOWER = 6
____exports.NPCNames[____exports.NPCNames.DIRE_TOWER] = "DIRE_TOWER"
____exports.NPCNames.QUEEN = 7
____exports.NPCNames[____exports.NPCNames.QUEEN] = "QUEEN"
____exports.NPCNames.CENTAUR = 8
____exports.NPCNames[____exports.NPCNames.CENTAUR] = "CENTAUR"
local function CustomAI(self, name, origin, options)
    local OnUnitHurt, tauntedDuration, unit, tauntedRemainingDuration
    function OnUnitHurt(self, event)
        local victim = EntIndexToHScript(event.entindex_killed)
        if unit == victim then
            tauntedRemainingDuration = tauntedDuration * 30
        end
    end
    local followRange = options.followRange or 2500
    local restTime = options.restTime or 1
    local tauntedFollowRange = followRange * 1.5
    local minFollowRange = options.minFollowRange or 0
    local behavior = options.behavior or CustomAIBehavior.FOLLOWER
    local originalPosition = origin
    local abilities = {}
    tauntedDuration = 3
    local rangeOfAction = 3000
    unit = CreateUnitByName(
        name,
        origin,
        true,
        nil,
        nil,
        DOTA_TEAM_CUSTOM_1
    )
    local state = CustomAIState.IDLE
    tauntedRemainingDuration = 0
    local remainingRestTime = 0
    local targetPosition
    local followTarget
    if options.shield then
        unit:AddNewModifier(
            unit,
            nil,
            "modifier_generic_npc_shield",
            {damage_block = unit:GetMaxHealth()}
        )
        unit:AddNewModifier(unit, nil, "modifier_generic_npc_mini_stun", {})
    end
    ListenToGameEvent(
        "entity_hurt",
        function(event) return OnUnitHurt(nil, event) end,
        nil
    )
    local function FindEnemy(self, radius)
        local units = FindUnitsInRadius(
            unit:GetTeamNumber(),
            unit:GetAbsOrigin(),
            nil,
            radius,
            DOTA_UNIT_TARGET_TEAM_ENEMY,
            DOTA_UNIT_TARGET_HERO + DOTA_UNIT_TARGET_BASIC,
            DOTA_UNIT_TARGET_FLAG_NO_INVIS,
            FIND_ANY_ORDER,
            false
        )
        if #units > 0 then
            return units[1]
        else
            return nil
        end
    end
    local function UpdateTarget(self)
        local currentFollowRange = tauntedRemainingDuration > 0 and tauntedFollowRange or followRange
        if followTarget then
            if CustomEntitiesLegacy:GetDistance(unit, followTarget) <= currentFollowRange and not followTarget:IsInvisible() then
                return
            else
                followTarget = nil
            end
        else
            followTarget = FindEnemy(nil, followRange)
        end
    end
    local function Follow(self)
        local origin = unit:GetAbsOrigin()
        UpdateTarget(nil)
        if followTarget and followTarget:IsAlive() then
            local distance = CustomEntitiesLegacy:GetDistance(unit, followTarget)
            local direction = Vector(0, 0)
            if followTarget:IsAlive() and distance > minFollowRange then
                direction = followTarget:GetAbsOrigin():__sub(origin):Normalized()
            end
            CustomEntitiesLegacy:SetDirection(unit, direction.x, direction.y)
            return true
        end
        return false
    end
    local function IsAbilityReady(self, ability)
        return ability:IsCooldownReady() and not ability:IsInAbilityPhase()
    end
    local function RegisterAbility(self, options)
        local ____options_ability_4 = options.ability
        local ____options_orderType_5 = options.orderType
        local ____temp_6 = #abilities + 1
        local function ____temp_7(____, ability, target)
            ExecuteOrderFromTable({
                OrderType = options.orderType,
                UnitIndex = unit:GetEntityIndex(),
                AbilityIndex = ability:GetEntityIndex(),
                Position = target and target:GetAbsOrigin() or nil
            })
        end
        local ____options_requirements_3
        if options.requirements then
            local ____options_requirements_2 = options.requirements
            local ____temp_0
            if options.requirements.cooldownReady ~= nil then
                ____temp_0 = options.requirements.cooldownReady
            else
                ____temp_0 = true
            end
            local ____temp_1
            if options.requirements.phaseReady ~= nil then
                ____temp_1 = options.requirements.phaseReady
            else
                ____temp_1 = true
            end
            ____options_requirements_3 = __TS__ObjectAssign({}, ____options_requirements_2, {cooldownReady = ____temp_0, phaseReady = ____temp_1})
        else
            ____options_requirements_3 = {cooldownReady = true, phaseReady = true}
        end
        local npcAbility = {
            ability = ____options_ability_4,
            orderType = ____options_orderType_5,
            priority = ____temp_6,
            cast = ____temp_7,
            requirements = ____options_requirements_3
        }
        abilities[#abilities + 1] = npcAbility
    end
    local function StartRest(self, restTime)
        remainingRestTime = restTime * 30
    end
    local function BackToOrigin(self, origin)
        local distanceFromOrigin = originalPosition:__sub(origin):Length2D()
        if rangeOfAction > distanceFromOrigin then
            return false
        end
        local direction = originalPosition:__sub(origin):Normalized()
        CustomEntitiesLegacy:SetDirection(unit, direction.x, direction.y)
        return true
    end
    local function Cast(self)
        if CustomEntitiesLegacy:IsDisplacing(unit) or CustomEntitiesLegacy:IsCasting(unit) or CustomEntitiesLegacy:IsChanneling(unit) or remainingRestTime > 0 then
            return false
        end
        local abilityToExecute = nil
        local abilityTarget = nil
        __TS__ArrayForEach(
            abilities,
            function(____, npcAbility)
                local ability = npcAbility.ability
                if npcAbility.requirements then
                    if npcAbility.requirements.cooldownReady then
                        if not npcAbility.ability:IsCooldownReady() then
                            return false
                        end
                    end
                    if npcAbility.requirements.phaseReady then
                        if npcAbility.ability:IsInAbilityPhase() then
                            return false
                        end
                    end
                    if npcAbility.requirements.targetInCastRange then
                        abilityTarget = FindEnemy(
                            nil,
                            ability:GetCastRange(
                                Vector(0, 0, 0),
                                nil
                            )
                        )
                        if not abilityTarget then
                            return false
                        end
                    end
                    if npcAbility.requirements.targetInRadius then
                        abilityTarget = FindEnemy(
                            nil,
                            ability:GetSpecialValueFor("radius")
                        )
                        if not abilityTarget then
                            return false
                        end
                    end
                end
                if abilityToExecute == nil then
                    abilityToExecute = npcAbility
                end
                if npcAbility.priority > abilityToExecute.priority then
                    abilityToExecute = npcAbility
                end
            end
        )
        if abilityToExecute then
            abilityToExecute = abilityToExecute
            abilityToExecute:cast(abilityToExecute.ability, abilityTarget)
            StartRest(nil, restTime)
            return true
        else
            return false
        end
    end
    local function StopMoving(self)
        CustomEntitiesLegacy:SetDirection(unit, 0, 0)
    end
    local function MoveTowards(self, point)
        local origin = unit:GetAbsOrigin()
        local distance = point:__sub(origin):Length2D()
        if distance < 10 then
            return false
        else
            local direction = point:__sub(origin):Normalized()
            CustomEntitiesLegacy:SetDirection(unit, direction.x, direction.y)
            return true
        end
    end
    local function PickTargetPosition(self)
        local origin = unit:GetAbsOrigin()
        local worldLimits = 1500
        local x = Clamp(
            origin.x + RandomInt(-400, 400),
            worldLimits,
            -worldLimits
        )
        local y = Clamp(
            origin.y + RandomInt(-400, 400),
            worldLimits,
            -worldLimits
        )
        targetPosition = Vector(x, y)
    end
    local function ClearTargetPosition(self)
        targetPosition = nil
    end
    local function Update(self)
        if tauntedRemainingDuration > 0 then
            tauntedRemainingDuration = tauntedRemainingDuration - 1
        end
        if remainingRestTime > 0 then
            remainingRestTime = remainingRestTime - 1
        end
        if not Cast(nil) then
            if behavior == CustomAIBehavior.STATIC then
                return
            end
            if behavior == CustomAIBehavior.WANDERER then
                if state == CustomAIState.WANDERING and targetPosition then
                    if not MoveTowards(nil, targetPosition) then
                        state = CustomAIState.IDLE
                        ClearTargetPosition(nil)
                        StopMoving(nil)
                    end
                else
                    state = CustomAIState.WANDERING
                    PickTargetPosition(nil)
                end
            else
                if not Follow(nil) then
                    StopMoving(nil)
                end
            end
        else
            remainingRestTime = 1 * 30
            ClearTargetPosition(nil)
            StopMoving(nil)
        end
    end
    return {
        unit = unit,
        IsAbilityReady = IsAbilityReady,
        RegisterAbility = RegisterAbility,
        Update = Update,
        BackToOrigin = BackToOrigin
    }
end
____exports.CustomAIMeta = {
    [____exports.NPCNames.QUEEN] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "npc_dota_hero_queenofpain", origin, {minFollowRange = 500})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("queen_scream"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("queen_dodge"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("queen_blink"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("queen_daggers"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("queen_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("queen_wave"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            return ai
        end,
        tier = ____exports.CustomAITier.BOSS
    },
    [____exports.NPCNames.CENTAUR] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "npc_dota_hero_centaur", origin, {})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("centaur_axe_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInRadius = true}
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("centaur_range_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("centaur_short_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET,
                requirements = {targetInRadius = true}
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("centaur_charge"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("centaur_rage"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET
            })
            return ai
        end,
        tier = ____exports.CustomAITier.BOSS
    },
    [____exports.NPCNames.RADIANT_ZOMBIE_RANGE_MEGA] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "radiant_zombie_healer", origin, {behavior = CustomAIBehavior.WANDERER, shield = true})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("radiant_zombie_heal_aura"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_zombie_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            return ai
        end,
        tier = ____exports.CustomAITier.MID
    },
    [____exports.NPCNames.DIRE_ZOMBIE_RANGE] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "dire_zombie_range", origin, {behavior = CustomAIBehavior.WANDERER, shield = true})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_zombie_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            return ai
        end,
        tier = ____exports.CustomAITier.BASIC
    },
    [____exports.NPCNames.DIRE_ZOMBIE_RANGE_MEGA] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "dire_zombie_range_mega", origin, {behavior = CustomAIBehavior.WANDERER, shield = true})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_zombie_rage_aura"),
                orderType = DOTA_UNIT_ORDER_CAST_NO_TARGET
            })
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_zombie_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            return ai
        end,
        tier = ____exports.CustomAITier.MID
    },
    [____exports.NPCNames.DIRE_ZOMBIE_MEELE_MEGA] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "dire_zombie_meele_mega", origin, {followRange = 1500, minFollowRange = 200, behavior = CustomAIBehavior.FOLLOWER, shield = true})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_zombie_attack_meele"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai.unit:SetHullRadius(95)
            return ai
        end,
        tier = ____exports.CustomAITier.MID
    },
    [____exports.NPCNames.RADIANT_ZOMBIE_MEELE_MEGA] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "radiant_zombie_meele", origin, {followRange = 1500, minFollowRange = 200, behavior = CustomAIBehavior.FOLLOWER, shield = true})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_zombie_attack_meele"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai.unit:SetHullRadius(95)
            return ai
        end,
        tier = ____exports.CustomAITier.BASIC
    },
    [____exports.NPCNames.FLYING_SKULL] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "flying_skull", origin, {followRange = 1000, minFollowRange = 150, behavior = CustomAIBehavior.FOLLOWER, shield = true})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("flying_skull_dash"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            return ai
        end,
        tier = ____exports.CustomAITier.BASIC
    },
    [____exports.NPCNames.DIRE_TOWER] = {
        factory = function(____, origin)
            local ai = CustomAI(nil, "dire_tower", origin, {behavior = CustomAIBehavior.STATIC})
            ai:RegisterAbility({
                ability = ai.unit:FindAbilityByName("dire_tower_attack"),
                orderType = DOTA_UNIT_ORDER_CAST_POSITION,
                requirements = {targetInCastRange = true}
            })
            ai.unit:SetHullRadius(100)
            return ai
        end,
        tier = ____exports.CustomAITier.HIGH
    }
}
return ____exports
